<!DOCTYPE html>
<html>
    <head>
        <title>Shadowrift Randomizer</title>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://cdn.shoelace.style/1.0.0-beta18/shoelace.js"></script>
        <link rel="stylesheet" href="https://cdn.shoelace.style/1.0.0-beta18/shoelace.css">
    </head>

    <body>

        <h1>Shadowrift Randomizer</h1>

        <ul id="cardList">
        </ul>

        <button id="btnRefresh">New Cards</button>

        <script>

            $(document).ready(function() {
                var list = $('#cardList');

                $("#btnRefresh").on("click", function() {
                    refresh();
                }); 

                $.getJSON( "data.json", function( data ) {
                    var heroes = [];
                    var monsters = [];
                    $.each( data, function( index, value ) {
                        if(value.type === "monster") { // seperate monsters
                            monsters.push(value);
                        }
                        else {
                            heroes.push(value); // seperate hero cards
                        }
                    });

                    generateMonsters(monsters);
                    generateHeroCards(heroes);

                });

                function generateMonsters(monsters) {
                    var i = Math.floor(Math.random()*monsters.length); 
                    list.html("<li class='monster'>" + monsters[i].card + "</li>");
                };

                function generateHeroCards(heroes) {
                    var heroHtml = [];
                    while( heroes.length > 8) {
                        heroes.splice(Math.floor(Math.random()*heroes.length), 1);
                    }

                    $.each( heroes, function( index, value ) {
                        heroHtml.push("<li>" + value.type + ": " + value.card + "</li>");
                    });

                    heroHtml = heroHtml.join("")

                    list.append(heroHtml);
                };

                function refresh(monsters,heroes) {
                    list.html("");
                    generateMonsters(monsters);
                    generateHeroCards(heroes);
                }
            })
        </script>

    </body>
</html>